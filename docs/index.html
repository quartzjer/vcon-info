<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vCon Info - Developer Tool for vCon Standards</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-brand">
                <h1 class="brand-title">vCon Info</h1>
            </div>
            <nav class="header-nav">
                <a href="https://datatracker.ietf.org/group/vcon/documents/" class="nav-link" target="_blank" rel="noopener noreferrer">IETF vCon WG</a>
                <a href="https://github.com/quartzjer/vcon-info" class="nav-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub Repository">
                    <img src="https://cdn.simpleicons.org/github" alt="GitHub" width="20" height="20">
                </a>
                <button class="lock-button" id="lock-button" aria-label="Toggle Key Input Panel" aria-expanded="false">
                    <img src="icons/20/solid/lock-closed.svg" alt="Lock" width="20" height="20" class="icon-lock">
                </button>
            </nav>
        </div>
    </header>

    <!-- Key Input Panel -->
    <div class="key-panel" id="key-panel">
        <div class="key-panel-container">
            <div class="key-inputs">
                <div class="key-input-group">
                    <textarea id="public-key" class="key-textarea" placeholder="Paste your public key here for signature validation..." spellcheck="false"></textarea>
                </div>
                <div class="key-input-group">
                    <textarea id="private-key" class="key-textarea" placeholder="Paste your private key here for decryption..." spellcheck="false"></textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Left Panel - Input -->
        <section class="input-panel">
            <!-- Input Tabs -->
            <div class="input-tabs">
                <button class="input-tab-button active" id="tab-paste" data-input-tab="paste">Paste</button>
                <button class="input-tab-button" id="tab-upload" data-input-tab="upload">Upload</button>
                <button class="input-tab-button" id="tab-examples" data-input-tab="examples">Examples</button>
                <button class="input-tab-button" id="tab-json" data-input-tab="json">JSON</button>
                <button class="input-tab-button" id="tab-encrypted" data-input-tab="encrypted">Encrypted</button>
            </div>
            
            <!-- Tab Content -->
            <div class="input-tab-content">
                <!-- Paste Tab -->
                <div class="input-tab-panel active" id="paste-view">
                    <div class="code-editor">
                        <textarea class="code-textarea" id="input-textarea" placeholder="Paste your vCon here...">{
  "vcon": "0.3.0",
  "uuid": "018972cc-8ddb-7ccc-baa5-ec2a4e6c7d0d",
  "created_at": "2023-12-14T18:59:45.911Z",
  "updated_at": "2023-12-14T19:00:12.345Z",
  "parties": [
    {
      "tel": "+1-555-123-4567",
      "name": "Alice Johnson",
      "email": "alice@example.com"
    },
    {
      "tel": "+1-555-987-6543", 
      "name": "Bob Smith",
      "email": "bob@example.com"
    }
  ],
  "dialog": [
    {
      "type": "recording",
      "start": "2023-12-14T18:59:50.100Z",
      "end": "2023-12-14T19:00:10.856Z",
      "parties": [0, 1],
      "originator": 0,
      "mimetype": "audio/wav",
      "filename": "call-recording.wav",
      "body": "base64-encoded-audio-data..."
    }
  ],
  "attachments": [
    {
      "type": "transcript",
      "parties": [0, 1],
      "mimetype": "text/plain",
      "body": "Transcript of the conversation..."
    }
  ]
}</textarea>
                    </div>
                </div>
                
                <!-- Upload Tab -->
                <div class="input-tab-panel" id="upload-view">
                    <div class="upload-container">
                        <div class="upload-drop-zone">
                            <svg class="upload-icon" width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                            </svg>
                            <p class="upload-text">Drop vCon file here or click to browse</p>
                            <input type="file" class="upload-input" id="file-input" accept=".json,.vcon" style="display: none;">
                        </div>
                    </div>
                </div>
                
                <!-- Examples Tab -->
                <div class="input-tab-panel" id="examples-view">
                    <div class="examples-container">
                        <div class="examples-header">
                            <h3 class="examples-title">vCon Examples</h3>
                            <p class="examples-description">Select an example to load and analyze</p>
                        </div>
                        <div class="examples-list" id="examples-list">
                            <!-- Examples will be loaded here dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- JSON Tab -->
                <div class="input-tab-panel" id="json-view">
                    <div class="json-builder">
                        <p class="json-placeholder">JSON builder interface coming soon</p>
                        <p class="json-hint">Build vCon objects using a visual form interface</p>
                    </div>
                </div>
                
                <!-- Encrypted Tab -->
                <div class="input-tab-panel" id="encrypted-view">
                    <div class="encrypted-container">
                        <div class="code-editor">
                            <textarea class="code-textarea encrypted-textarea" id="encrypted-textarea" placeholder="Paste your encrypted vCon here..."></textarea>
                        </div>
                        <div class="decryption-hint">
                            <p>To decrypt, provide your private key using the <img src="icons/16/solid/lock-closed.svg" alt="Lock" width="16" height="16" class="icon-inline"> button above</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Right Panel - Output -->
        <section class="output-panel">

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-button active" id="tab-inspector" data-tab="inspector">Inspector</button>
                <button class="tab-button" id="tab-timeline" data-tab="timeline">Timeline</button>
                <button class="tab-button" id="tab-security" data-tab="security">Security</button>
                <button class="tab-button" id="tab-validation" data-tab="validation">
                    <span id="validation-tab-icon">Validation <img src="icons/16/solid/question-mark-circle.svg" alt="Unknown" width="16" height="16" class="icon-inline icon-validation-unknown"></span>
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Inspector Tab -->
                <div class="tab-panel active" id="inspector-view">
                    <div id="vcon-tree">
                        <!-- Metadata Section -->
                        <div class="inspector-section">
                            <div class="section-header section-metadata">
                                <span class="section-title">Metadata</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <div class="detail-row">
                                        <span class="detail-key">vCon Version:</span>
                                        <span class="detail-value"><code>0.3.0</code></span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-key">UUID:</span>
                                        <span class="detail-value"><code>018972cc-8ddb-7ccc-baa5-ec2a4e6c7d0d</code></span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-key">Created At:</span>
                                        <span class="detail-value">December 14, 2023 at 6:59 PM UTC</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-key">Updated At:</span>
                                        <span class="detail-value">December 14, 2023 at 7:00 PM UTC</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-key">Subject:</span>
                                        <span class="detail-value"><em>Not specified</em></span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-key">Must Support Extensions:</span>
                                        <span class="detail-value"><em>None</em></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Relationships Section -->
                        <div class="inspector-section">
                            <div class="section-header section-relationships">
                                <span class="section-title">Relationships</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <div class="relationship-info">
                                        <div class="relationship-type">
                                            <span class="relationship-badge badge-standard">Standard vCon</span>
                                        </div>
                                        <div class="relationship-details">
                                            <div class="detail-row">
                                                <span class="detail-key">Type:</span>
                                                <span class="detail-value">Standard (no relationships)</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Parties Section -->
                        <div class="inspector-section">
                            <div class="section-header section-parties">
                                <span class="section-title">Parties</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <div class="party-item">
                                        <div class="party-header">
                                            <span class="party-index">0</span>
                                            <span class="party-identifier">Alice Johnson</span>
                                        </div>
                                        <div class="party-details">
                                            <div class="detail-row">
                                                <span class="detail-key">Phone:</span>
                                                <span class="detail-value">+1-555-123-4567</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Email:</span>
                                                <span class="detail-value">alice@example.com</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="party-item">
                                        <div class="party-header">
                                            <span class="party-index">1</span>
                                            <span class="party-identifier">Bob Smith</span>
                                        </div>
                                        <div class="party-details">
                                            <div class="detail-row">
                                                <span class="detail-key">Phone:</span>
                                                <span class="detail-value">+1-555-987-6543</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Email:</span>
                                                <span class="detail-value">bob@example.com</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dialog Section -->
                        <div class="inspector-section">
                            <div class="section-header section-dialog">
                                <span class="section-title">Dialog</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <div class="dialog-item">
                                        <div class="dialog-header">
                                            <span class="dialog-index">0</span>
                                            <span class="dialog-type">Audio Recording</span>
                                            <span class="dialog-badge badge-text">20.75s</span>
                                        </div>
                                        <div class="dialog-details">
                                            <div class="detail-row">
                                                <span class="detail-key">Type:</span>
                                                <span class="detail-value">recording</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Format:</span>
                                                <span class="detail-value">audio/wav</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Duration:</span>
                                                <span class="detail-value">20.756 seconds</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Parties:</span>
                                                <span class="detail-value">Alice Johnson, Bob Smith</span>
                                            </div>
                                            <div class="detail-note">
                                                <p><img src="icons/16/solid/paper-clip.svg" alt="Attachment" width="16" height="16" class="icon-inline"> Attached file: <code>call-recording.wav</code></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Attachments Section -->
                        <div class="inspector-section">
                            <div class="section-header section-attachments">
                                <span class="section-title">Attachments</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <div class="attachment-item">
                                        <div class="attachment-header">
                                            <span class="attachment-index">0</span>
                                            <span class="attachment-type">Transcript</span>
                                            <span class="attachment-badge">text/plain</span>
                                        </div>
                                        <div class="attachment-details">
                                            <div class="detail-row">
                                                <span class="detail-key">Type:</span>
                                                <span class="detail-value">transcript</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Format:</span>
                                                <span class="detail-value">text/plain</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="detail-key">Size:</span>
                                                <span class="detail-value">1.2 KB</span>
                                            </div>
                                            <div class="attachment-note">
                                                <p>This attachment contains the full transcript of the conversation between all parties.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Analysis Section -->
                        <div class="inspector-section">
                            <div class="section-header section-analysis">
                                <span class="section-title">Analysis</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <p><span class="highlight">Sentiment Analysis:</span> Neutral (0.72 confidence)</p>
                                    <p><span class="highlight">Language Detection:</span> English (en-US)</p>
                                    <p><span class="highlight">Topics Identified:</span></p>
                                    <ul style="margin-left: var(--spacing-lg); margin-top: var(--spacing-xs);">
                                        <li>Product inquiry</li>
                                        <li>Technical support</li>
                                        <li>Account management</li>
                                    </ul>
                                    <p style="margin-top: var(--spacing-md);">Analysis performed by <code>sentiment-analyzer-v2.1</code></p>
                                </div>
                            </div>
                        </div>


                        <!-- Extensions Section -->
                        <div class="inspector-section">
                            <div class="section-header section-extensions">
                                <span class="section-title">Extensions</span>
                                <button class="panel-toggle" aria-label="Toggle section">
                                    <img src="icons/16/solid/eye.svg" alt="Toggle" width="16" height="16" class="icon-eye">
                                </button>
                            </div>
                            <div class="section-content">
                                <div class="content-placeholder">
                                    <p><span class="highlight">Custom Extensions:</span> 2 found</p>
                                    <div style="margin-top: var(--spacing-md);">
                                        <p><code>x-customer-id</code>: CUST-2023-45678</p>
                                        <p><code>x-call-center</code>: NYC-01</p>
                                        <p><code>x-agent-id</code>: AGT-789</p>
                                        <p><code>x-queue-time</code>: 45 seconds</p>
                                    </div>
                                    <p style="margin-top: var(--spacing-md); font-style: italic;">These are vendor-specific extensions added by the recording system.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Timeline Tab -->
                <div class="tab-panel" id="timeline-view">
                    <div class="timeline-container">
                        <p class="timeline-placeholder">Timeline visualization will be displayed here</p>
                    </div>
                </div>

                <!-- Security Tab -->
                <div class="tab-panel" id="security-view">
                    <div class="security-container">
                        <div class="security-status" id="security-status">
                            <div class="security-item">
                                <span class="security-label">Format:</span>
                                <span class="security-value" id="security-format">Unsigned</span>
                                <span class="security-indicator" id="security-format-indicator"><img src="icons/20/solid/document.svg" alt="Document" width="20" height="20" class="icon-document"></span>
                            </div>
                            <div class="security-item">
                                <span class="security-label">Signature Status:</span>
                                <span class="security-value" id="security-signature-status">Not Signed</span>
                                <span class="security-indicator" id="security-signature-indicator"><img src="icons/20/solid/x-circle.svg" alt="Not Signed" width="20" height="20" class="icon-error"></span>
                            </div>
                            <div class="security-item">
                                <span class="security-label">Encryption Status:</span>
                                <span class="security-value" id="security-encryption-status">Not Encrypted</span>
                                <span class="security-indicator" id="security-encryption-indicator"><img src="icons/20/solid/lock-open.svg" alt="Not Encrypted" width="20" height="20" class="icon-unlocked"></span>
                            </div>
                        </div>
                        
                        <div class="signature-details" id="signature-details" style="display: none;">
                            <h4>Signature Information</h4>
                            <div class="signature-info">
                                <div class="detail-row">
                                    <span class="detail-key">Algorithm:</span>
                                    <span class="detail-value" id="signature-algorithm">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Key ID:</span>
                                    <span class="detail-value" id="signature-kid">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">vCon UUID:</span>
                                    <span class="detail-value" id="signature-uuid">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Certificate Chain:</span>
                                    <span class="detail-value" id="signature-x5c">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Certificate URL:</span>
                                    <span class="detail-value" id="signature-x5u">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Verification Status:</span>
                                    <span class="detail-value" id="signature-verification-status">Not Verified</span>
                                </div>
                            </div>
                            <div class="certificate-chain" id="certificate-chain" style="display: none;">
                                <h5>Certificate Chain Details</h5>
                                <div class="certificate-list" id="certificate-list">
                                    <!-- Certificate details will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="encryption-details" id="encryption-details" style="display: none;">
                            <h4>Encryption Information</h4>
                            <div class="encryption-info">
                                <div class="detail-row">
                                    <span class="detail-key">Algorithm:</span>
                                    <span class="detail-value" id="encryption-algorithm">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Encoding:</span>
                                    <span class="detail-value" id="encryption-encoding">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Recipients:</span>
                                    <span class="detail-value" id="encryption-recipients">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">UUID:</span>
                                    <span class="detail-value" id="encryption-uuid">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Decryption:</span>
                                    <span class="detail-value" id="decryption-status">Pending</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Compliance:</span>
                                    <span class="detail-value" id="encryption-compliance">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="integrity-details" id="integrity-details" style="display: none;">
                            <h4>Content Integrity</h4>
                            <div class="integrity-info">
                                <div class="detail-row">
                                    <span class="detail-key">Hash Verification:</span>
                                    <span class="detail-value" id="hash-verification-status">Pending</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">External Files:</span>
                                    <span class="detail-value" id="external-files-count">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Hash Mismatches:</span>
                                    <span class="detail-value" id="hash-mismatches">-</span>
                                </div>
                            </div>
                            <div class="hash-details" id="hash-details">
                                <!-- Hash verification results will be populated here -->
                            </div>
                        </div>
                        
                        <div class="key-validation" id="key-validation" style="display: none;">
                            <h4>Key Validation</h4>
                            <div class="key-info">
                                <div class="detail-row">
                                    <span class="detail-key">Public Key Status:</span>
                                    <span class="detail-value" id="public-key-status">Not Provided</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Private Key Status:</span>
                                    <span class="detail-value" id="private-key-status">Not Provided</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-key">Key Format:</span>
                                    <span class="detail-value" id="key-format">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Validation Tab -->
                <div class="tab-panel" id="validation-view">
                    <div class="validation-container">
                        <div class="validation-header" id="validation-status">
                            <h2 class="validation-title">
                                <span id="validation-status-icon"><img src="icons/24/solid/question-mark-circle.svg" alt="Unknown" width="24" height="24" class="icon-validation-unknown"></span>
                                <span id="validation-status-text">Validation Status</span>
                            </h2>
                            <div class="validation-summary" id="validation-summary">
                                No vCon data to validate
                            </div>
                        </div>
                        
                        <div class="validation-details" id="validation-details">
                            <div class="validation-section">
                                <h3 class="validation-section-title">Schema Validation</h3>
                                <div class="validation-item" id="schema-validation">
                                    <span class="validation-item-icon"><img src="icons/20/solid/clock.svg" alt="Pending" width="20" height="20" class="icon-pending"></span>
                                    <span class="validation-item-text">Waiting for input...</span>
                                </div>
                            </div>
                            
                            <div class="validation-section">
                                <h3 class="validation-section-title">Required Fields</h3>
                                <div class="validation-item" id="required-fields">
                                    <span class="validation-item-icon"><img src="icons/20/solid/clock.svg" alt="Pending" width="20" height="20" class="icon-pending"></span>
                                    <span class="validation-item-text">Waiting for input...</span>
                                </div>
                            </div>
                            
                            <div class="validation-section">
                                <h3 class="validation-section-title">Data Integrity</h3>
                                <div class="validation-item" id="data-integrity">
                                    <span class="validation-item-icon"><img src="icons/20/solid/clock.svg" alt="Pending" width="20" height="20" class="icon-pending"></span>
                                    <span class="validation-item-text">Waiting for input...</span>
                                </div>
                            </div>
                            
                            <div class="validation-section">
                                <h3 class="validation-section-title">Security</h3>
                                <div class="validation-item" id="security-validation">
                                    <span class="validation-item-icon"><img src="icons/20/solid/clock.svg" alt="Pending" width="20" height="20" class="icon-pending"></span>
                                    <span class="validation-item-text">Waiting for input...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <p class="footer-text">An unofficial vCon web tool where your data never leaves your browser</p>
            <div class="footer-links">
                <a href="https://github.com/quartzjer/vcon-info" class="footer-link" target="_blank" rel="noopener noreferrer">
                    Built with <img src="icons/20/solid/heart.svg" alt="Love" width="20" height="20" style="color: red; fill: red;">
                </a>
            </div>
        </div>
    </footer>

    <script src="jose.min.js"></script>
    <script src="processor.js"></script>
    <script src="utils.js"></script>
    <script src="validator.js"></script>
    <script src="crypto.js"></script>
    <script src="ui.js"></script>
    <script src="app.js"></script>
</body>
</html>